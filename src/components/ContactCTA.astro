---
/**
 * Reusable Contact CTA card for bottom of pages.
 * Simple, consistent call-to-action.
 */
import { SITE_CONFIG } from '../config/constants';

interface Props {
  heading?: string;
  text?: string;
}

const {
  heading = "Let's talk",
  text = 'I build scalable systems and automate workflows. Tell me about your challenges.',
} = Astro.props;
---

<section class="contact-cta-card">
  <h3>{heading}</h3>
  <p>{text}</p>
  <div class="cta-buttons">
    <a
      href={`mailto:${SITE_CONFIG.email}`}
      class="contact-cta-btn"
      aria-label="Send email to Wayne Nolette"
    >
      <svg
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        aria-hidden="true"
      >
        <path
          d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
        ></path>
        <polyline points="22,6 12,13 2,6"></polyline>
      </svg>
      <span>Email Me</span>
    </a>
    <a
      href={SITE_CONFIG.linkedin}
      target="_blank"
      rel="noopener noreferrer"
      class="contact-cta-secondary"
      aria-label="Connect on LinkedIn"
    >
      <svg
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="currentColor"
        aria-hidden="true"
      >
        <path
          d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
        ></path>
      </svg>
      <span>LinkedIn</span>
    </a>
  </div>
  <span class="email-hint">{SITE_CONFIG.email}</span>
</section>

<style>
  .contact-cta-card {
    position: relative;
    margin-top: var(--spacing-2xl);
    padding: var(--spacing-xl);
    padding-top: calc(var(--spacing-xl) + var(--border-accent));
    background: var(--color-bg-subtle);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    text-align: center;
    overflow: hidden;
  }

  /* Gradient top border accent */
  .contact-cta-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: var(--border-accent);
    background: linear-gradient(
      90deg,
      var(--color-accent),
      var(--color-gradient-purple)
    );
  }

  .contact-cta-card h3 {
    font-size: var(--font-size-6xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    margin: 0 0 var(--spacing-sm) 0;
    letter-spacing: var(--letter-spacing-snug);
  }

  .contact-cta-card p {
    color: var(--color-text-muted);
    margin: 0 auto var(--spacing-lg) auto;
    font-size: var(--font-size-md);
    line-height: var(--line-height-loose);
    letter-spacing: var(--letter-spacing-slight);
    text-align: center;
    max-width: 500px;
  }

  .cta-buttons {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
  }

  .email-hint {
    display: block;
    margin-top: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--color-text-subtle);
    letter-spacing: var(--letter-spacing-subtle);
    font-family: var(--font-mono);
  }

  .contact-cta-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-xl);
    background: linear-gradient(
      135deg,
      var(--color-accent) 0%,
      var(--color-link) 100%
    );
    color: var(--color-btn-text);
    text-decoration: none;
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-lg);
    letter-spacing: var(--letter-spacing-subtle);
    min-height: var(--touch-target);
    transition: all var(--transition-bounce);
    /* Accent glow shadow for visibility */
    box-shadow: 0 4px 14px var(--color-accent-30);
    position: relative;
    overflow: hidden;
    z-index: 1;

    /* Remove Safari default focus outline */
    outline: none;
    appearance: none;
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
  }

  .contact-cta-btn svg {
    transition: transform var(--transition-base)
      cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Only apply hover effects on devices that support hover */
  @media (hover: hover) {
    .contact-cta-btn:hover {
      background: linear-gradient(
        135deg,
        var(--color-link) 0%,
        var(--color-link-hover) 100%
      );
      transform: translateY(var(--lift-sm));
      box-shadow: 0 8px 24px var(--color-accent-40);
      text-decoration: none;
    }

    .contact-cta-btn:hover svg {
      transform: translateY(var(--lift-sm)) rotate(-5deg);
    }
  }

  /* Clean focus state without Safari outline */
  .contact-cta-btn:focus-visible {
    outline: none;
    box-shadow:
      0 2px 8px var(--color-overlay-black-15),
      0 0 0 2px var(--color-bg),
      0 0 0 4px var(--color-accent);
  }

  .contact-cta-btn:active {
    transform: scale(0.98);
    box-shadow: 0 1px 4px var(--color-overlay-black-20);
  }

  /* Secondary CTA - LinkedIn */
  .contact-cta-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-xl);
    background: transparent;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    text-decoration: none;
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-lg);
    letter-spacing: var(--letter-spacing-subtle);
    min-height: var(--touch-target);
    transition: all var(--transition-bounce);
    position: relative;
    overflow: hidden;
    z-index: 1;
    outline: none;
    appearance: none;
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
  }

  .contact-cta-secondary svg {
    transition: transform var(--transition-base)
      cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @media (hover: hover) {
    .contact-cta-secondary:hover {
      border-color: var(--color-accent-30);
      color: var(--color-link);
      background: var(--color-accent-5);
      transform: translateY(var(--lift-sm));
      text-decoration: none;
    }

    .contact-cta-secondary:hover svg {
      transform: scale(1.1);
    }
  }

  .contact-cta-secondary:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px var(--color-bg),
      0 0 0 4px var(--color-accent);
  }

  .contact-cta-secondary:active {
    transform: scale(0.98);
  }

  @media (max-width: 640px) {
    .contact-cta-card {
      padding: var(--spacing-lg);
    }

    .contact-cta-card h3 {
      font-size: var(--font-size-4xl);
    }

    .contact-cta-btn,
    .contact-cta-secondary {
      width: 100%;
    }
  }

  /* Extra small screens (iPhone SE 375px) */
  @media (max-width: 400px) {
    .contact-cta-card {
      padding: var(--spacing-md);
    }

    .contact-cta-card h3 {
      font-size: var(--font-size-2xl);
    }

    .contact-cta-card p {
      font-size: var(--font-size-md);
    }

    .contact-cta-btn,
    .contact-cta-secondary {
      font-size: var(--font-size-md);
      padding: var(--spacing-sm) var(--spacing-lg);
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .contact-cta-btn,
    .contact-cta-btn svg,
    .contact-cta-secondary,
    .contact-cta-secondary svg {
      transition: none;
    }
  }
</style>
